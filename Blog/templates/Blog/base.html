{% load  static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<!------ Include the above in your HEAD tag ---------->

<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->


<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
        crossorigin="anonymous">
        
<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script> -->
        

    <title>Django-Blog</title>
      	<link rel="icon" type="image/png" href=" {% static 'users/images/websitelogo.png' %}"/>
    <link rel = "stylesheet"
   type = "text/css"
   href = "{% static 'Blog/css/main.css' %}" />
  </head>
  <body>
    

<!-- <nav class="navbar navbar-light bg-info navbar-custom"  >
        <a href="#" class="navbar-brand">LetsShareThoughts</a>
        <form class="form-inline">
            <div class="input-group">


                <input type="text" class="form-control" aria-label="Recipient's username" aria-describedby="button-addon2">
                <div class="input-group-append">
                    <button class="btn btn-outline-primary" type="button" id="button-addon2">
                        <i class="fa fa-search" style="color: white;"></i>
                    </button>
                </div>
            </div>
        </form>
    </nav>
 -->
<nav class="navbar navbar-expand-lg navbar-light bg-light navbar-custom ">
  <a class="navbar-brand text-white" href="#">Django-Blog</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link text-white" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white" href="#">About</a>
      </li>
     
    </ul>
    <div class="navbar-nav">
{#                    <!-- {% if user.is_authenticated %} -->#}
                      <!--   <a class="nav-item nav-link text-white" href="#">New Post</a>
                        <a class="nav-item nav-link text-white" href="#">Profile</a> -->
        <a class="nav-item nav-link text-white" href="{% url 'profile' %}">Profile</a>
                        <a class="nav-item nav-link text-white" href="{% url 'logout' %}">Logout</a>
{#                   <!--  {% else %} -->#}
                        
{#                   <!--  {% endif %} -->#}
                </div>
{#    <form class="form-inline my-2 my-lg-0">#}
{#      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">#}
{#      <button class="btn btn-outline-info my-2 my-sm-0 text-white" type="submit">Search</button>#}
{#    </form>#}
  </div>
</nav>


     <div class="container-fluid gedf-wrapper">
        <div class="row">
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body">
                        <div class="mr-2">
                                  
                                </div>
                        <div class="h5">

                                {% if user.profile.image.url %}
                                       <img class="rounded-circle" height="100" width="90" src="{{ user.profile.image.url }}" alt="">
                               <a href="{% url 'profile' %}"> @{{user.last_name}} </a>
                        </div>

                        {% else %}
                                    <img class="rounded-circle" height="100" width="90" src="{% static 'users/images/default.png' %}" alt="">
                               <a href="{% url 'profile' %}"> @{{user.last_name}} </a>
                        </div>
                    {% endif %}


                        <div class="h7 text-muted">Fullname : {{ user.first_name}} {{ user.last_name }}</div>
                        <div class="h7">Developer of web applications, JavaScript, PHP, Java, Python, Ruby, Java, Node.js,
                            etc.
                        </div>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <div class="h6 text-muted">Followers</div>
                            <div class="h5">5.2342</div>
                        </li>
                        <li class="list-group-item">
                            <div class="h6 text-muted">Following</div>
                            <div class="h5">6758</div>
                        </li>
                        <li class="list-group-item">Vestibulum at eros</li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6 gedf-main">

                <!--- \\\\\\\Post-->
                <div class="card gedf-card">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="posts-tab" data-toggle="tab" href="#posts" role="tab" aria-controls="posts" aria-selected="true">Make
                                    a publication</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="images-tab" data-toggle="tab" role="tab" aria-controls="images" aria-selected="false" href="#images">Images</a>
                            </li>
                        </ul>
                    </div>
                    <form method="POST" action="{% url 'post'  %}">
                        {% csrf_token %}
                    <div class="card-body">
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="posts" role="tabpanel" aria-labelledby="posts-tab">
                                <div class="form-group">
                                    <label class="sr-only" for="message">title</label>
                                    <textarea class="form-control" id="message" rows="1" placeholder="What are you thinking about?(Title)" name="title"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="sr-only" for="message">post</label>
                                    <textarea class="form-control" id="message" rows="3" placeholder="Whats your thought?" name="post"></textarea>
                                </div>

                            </div>
                            <div class="tab-pane fade" id="images" role="tabpanel" aria-labelledby="images-tab">
                                <div class="form-group">
                                    <div class="custom-file">
                                        <input type="file" class="custom-file-input" id="customFile">
                                        <label class="custom-file-label" for="customFile">Upload image</label>
                                    </div>
                                </div>
                                <div class="py-4"></div>
                            </div>
                        </div>
                        <div class="btn-toolbar justify-content-between">
                            <div class="btn-group">
                                <button type="submit" class="btn btn-primary">share</button>
                            </div>
                        </form>
                            <div class="btn-group">
                                <button id="btnGroupDrop1" type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                                    aria-expanded="false">
                                    <i class="fa fa-globe"></i>
                                </button>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="btnGroupDrop1">
                                    <a class="dropdown-item" href="#"><i class="fa fa-globe"></i> Public</a>
                                    <a class="dropdown-item" href="#"><i class="fa fa-users"></i> Friends</a>
                                    <a class="dropdown-item" href="#"><i class="fa fa-user"></i> Just me</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Post /////-->

                <!--- \\\\\\\Post-->
         {% for post in posts %}
                <div class="card gedf-card">
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex justify-content-between align-items-center">

                              {% if post.author.profile.image.url %}

                             <div class="mr-2">

                                    <img class="rounded-circle" height="50" width="50" src="{{ post.author.profile.image.url }}" alt="">

                                </div>
                                {% else %}

                                  <div class="mr-2">

                                    <img class="rounded-circle" height="50" width="50" src="{% static 'users/images/default.png' %}" alt="">

                                </div>
                                {% endif %}

                                <div class="ml-2">
                                    <div class="h5 m-0">@{{ post.author.last_name}}</div>
                                    <div class="h7 text-muted">{{ post.author.last_name }}{{ post.author.first_name }}</div>
                                </div>
                            </div>
                            <div>
                                <div class="dropdown">
                                    <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fa fa-ellipsis-h"></i>
                                    </button>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">
                                        <div class="h6 dropdown-header">Configuration</div>
                                        <a class="dropdown-item" href="#">Save</a>
{#                                      <a class="dropdown-item" href="#">Report</a>#}
{#                                     <a class="dropdown-item" href="#">Hide</a>#}

                                        {% if post.author == user %}

                                            <a href="edit" id="edit" class="dropdown-item edit" data-toggle="modal" data-target="#myModaledit" data-myvalue="{{ post.title }}" data-myvar="{{ post.content }}" data-bb="{{ post.id }}">
                                                Edit</a>


                                        <!-- Button trigger modal -->
                                       <a  class="dropdown-item" href="fade" data-toggle="modal" data-target="#myModal" data-myvalue="{{ post.title }}" data-myvar="{{ post.id }}">
                                         Delete

                                       </a>
                                         {% endif %}


                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="card-body">
                        <div class="text-muted h7 mb-2"> <i class="fa fa-clock-o"></i>{{ post.date_posted }}</div>
                        <a class="card-link" href="#">
                            <h5 class="card-title">{{ post.title }}</h5>
                        </a>

                        <p class="card-text">
                           {{ post.content }}
                        </p>
                    </div>
                    <div class="card-footer">
                        <a href="#" class="card-link"><i class="fa fa-gittip"></i> Like</a>
                        <a  class="card-link"  data-toggle="collapse" href="#multiCollapseExample1" role="button" aria-expanded="false" aria-controls="multiCollapseExample1"><i class="fa fa-comment"></i> Comment</a>
                        <a href="#" class="card-link"><i class="fa fa-mail-forward"></i> Share</a>
                        <!-- Bootstrap toggle comment box -->
                        <div class="row">
  <div class="col">
    <div class="collapse multi-collapse" id="multiCollapseExample1">
      <div class="card card-body">
        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
      </div>
    </div>
  </div>

</div>







                    </div>
                </div>
         {% endfor %}




            </div>
            <div class="col-md-3">
                <div class="card gedf-card">
                    <div class="card-body">
                        <h6 class="card-title text-primary">Sponsored</h6>
{#<h6 class="card-subtitle mb-2 text-muted text-right">Card subtitle</h6>#}
{#                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the#}
{#                            card's content.</p>#}
{#                          <div class="mr-2">#}
{##}
{#                                    <img class="rounded-circle" height="50" width="50" src="" alt="">#}
{##}
{#                                </div>#}
                        {% for ad in ads %}
                        <div class="row">
                            <div class="col-lg-12">
                           <a href="{{ ad.ads_href}}  "><h5>{{ ad.ads_title }}</h5></a>
                            </div>
                            <div class="row">
                                <div class="col-lg-3 col-sm-12 col-md-12">
                                    <img height="70" width="70" src="{{ ad.ads_image.url }}" style="padding-left: 5px;"/>
                                </div>
                                <div class="col-lg-9 col-sm-12 col-md-12" style="height: 90px;" >
                                    <h6 class="text-primary">{{ ad.ads_content }}</h6>

                                </div>

                        </div>
                        </div>
                        {% endfor %}
{#                        <a href="#" class="card-link">Card link</a>#}
{#                        <a href="#" class="card-link">Another link</a>#}
                    </div>
                </div>
                <div class="card gedf-card">
                        <div class="card-body">
                            <a href="https://medium.com/@bbang2358/iitertools-in-python-588abc6d3cc5" class="card-link""><h5 class="card-title text-primary">ITERTOOLS IN PYTHON</h5></a>
                            <h6 class="card-subtitle mb-2 text-muted">-popular blog of the year from   medium.com</h6>
                            <p class="card-text">It has been called as a “gem” and “coolest thing ever” and if you have not heard of it then you are missing one of the greatest feature of python. This tool is very important as it is fast and memory efficient and helps to perform efficient looping.
                                </p>
                            <a href="#"class="card-link">visit page</a>
                            <a href="#" class="card-link">Another link</a>
                        </div>
                    </div>
            </div>
        </div>




<!-- Button trigger modal -->

<!-- Modal Delete -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
           <h2 class="modal-title" id="myModalLabel">Delete</h2>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

      </div>
      <div class="modal-body">
          <span><b class="text-primary">Are you sure you want to delete the post:</b></span> <h3>"<span id="modal-myvalue"></span>"?</h3>

          <span id="modal-myvar"  class="text-white"></span>




      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
       <a id="link" href=" "><button   type="button" class="btn btn-danger delete" >Delete</button></a>
      </div>
    </div>
  </div>
</div>

<!-- Modal Edit -->
<div class="modal fade edit" id="myModaledit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Do you want to update your post?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
{#          <span id="modal-myvalue"></span>#}
{#          <span id="modal-myvar" ></span>#}
{#           <span id="modal-bb"></span>#}


        <form method="POST" id="update_form" >
            {% csrf_token  %}
          <div class="form-group">
            <label for="recipient-name" class="col-form-label"><h3>Title</h3></label>
              <textarea rows="2" type="text" class="form-control" id="modal-title"  name="title"></textarea>
          </div>
          <div class="form-group">
            <label for="message-text" class="col-form-label"><h3>Post</h3></label>
            <textarea  rows="5" class="form-control" id="modal-content" name="post"></textarea>
          </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
         <button type="submit" class="btn btn-primary update">update</button>
      </div>
         </form>

    </div>
  </div>
</div>

{#<div class="modal fade" id="modalContactForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"#}
{#  aria-hidden="true">#}
{#  <div class="modal-dialog" role="document">#}
{#    <div class="modal-content">#}
{#      <div class="modal-header text-center">#}
{#        <h4 class="modal-title w-100 font-weight-bold">Write to us</h4>#}
{#        <button type="button" class="close" data-dismiss="modal" aria-label="Close">#}
{#          <span aria-hidden="true">&times;</span>#}
{#        </button>#}
{#      </div>#}
{#      <div class="modal-body mx-3">#}
{##}
{##}
{##}
{##}
{#        <div class="md-form mb-5">#}
{#          <i class="fas fa-tag prefix grey-text"></i>#}
{#             <label data-error="wrong" data-success="right" for="form32">Title</label>#}
{#          <input type="text" id="form32" class="form-control validate">#}
{##}
{#        </div>#}
{##}
{#        <div class="md-form">#}
{#          <i class="fas fa-pencil prefix grey-text"></i>#}
{#                      <label data-error="wrong" data-success="right" for="form8">Your Post</label>#}
{#          <textarea type="text" id="form8" class="md-textarea form-control" rows="4"></textarea>#}
{##}
{#        </div>#}
{##}
{#      </div>#}
{#      <div class="modal-footer d-flex justify-content-center">#}
{#          <button class="btn btn-secondary" data-dismiss="modal">close#}
{##}
{#        </button>#}
{#        <button class="btn btn-primary">Update#}
{##}
{#        </button>#}
{##}
{#      </div>#}
{#    </div>#}
{#  </div>#}
{#</div>#}
{##}
{#<div class="text-center">#}
{##}
{#</div>#}



    </div>



<script>

    // data-* attributes to scan when populating modal values
var ATTRIBUTES = ['myvalue', 'myvar', 'bb'];


$('[data-toggle="modal"]').on('click', function (e) {
  // convert target (e.g. the button) to jquery object
  var $target = $(e.target);
  // modal targeted by the button
  var modalSelector = $target.data('target');
  var array=[];
  i = 0;

  // iterate over each possible data-* attribute
  ATTRIBUTES.forEach(function (attributeName) {
    // retrieve the dom element corresponding to current attribute
    var $modalAttribute = $(modalSelector + ' #modal-' + attributeName);
    var dataValue = $target.data(attributeName);
    array[i]=dataValue;
    i++;





    // if the attribute value is empty, $target.data() will return undefined.
    // In JS boolean expressions return operands and are not coerced into
    // booleans. That way is dataValue is undefined, the left part of the following
    // Boolean expression evaluate to false and the empty string will be returned
    $modalAttribute.text(dataValue || '');

  });
  {#alert(array[0]);#}
  {#alert(array[1]);#}
  {#alert(array[2]);#}
$('#modal-title').val(array[0]);
$('#modal-content').val(array[1]);
$('#update_form').attr('action','../update/'+array[2] +"/");

{#$(".update").click(function () {#}


});





$(".delete").click(function(){
 var post_id=($("#modal-myvar").text());
 var iNum = parseInt(post_id);

{#alert(iNum);#}

    $("#link").attr('href','../delete/'+ iNum);

});

</script>




    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>
  

</html>